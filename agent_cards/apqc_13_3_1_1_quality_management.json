{
  "apqc_id": "13.3.1.1",
  "apqc_name": "Manage enterprise quality",
  "category": "13.0 - Develop and Manage Business Capabilities",
  "description": "Enterprise quality management workflow from quality planning through continuous improvement, including standards development, compliance monitoring, audit management, and corrective actions.",
  "orchestration_pattern": "sequential",
  "total_steps": 7,
  "estimated_duration_seconds": 172800,
  "compliance_frameworks": ["ISO 9001", "ISO 14001", "ISO 45001", "Six Sigma", "TQM", "CMMI"],
  "data_retention_days": 2555,

  "agent_cards": [
    {
      "id": "agent_13_3_1_1_step1",
      "apqc_id": "13.3.1.1",
      "step_number": 1,
      "step_name": "Quality Planning",
      "description": "Establish quality objectives, standards, and metrics aligned with business goals",
      "purpose": "Define quality framework and targets",
      "business_value": "Clear quality expectations and standards",

      "capabilities": ["quality_objective_setting", "standard_development", "metric_definition", "process_mapping", "resource_planning"],

      "input_schema": [
        {"name": "business_objectives", "type": "array", "required": true},
        {"name": "scope", "type": "string", "required": true, "validation": {"enum": ["enterprise", "division", "product_line", "process"]}},
        {"name": "regulatory_requirements", "type": "array", "required": true},
        {"name": "customer_requirements", "type": "array", "required": false}
      ],

      "output_schema": [
        {"name": "quality_policy", "type": "object", "required": true},
        {"name": "quality_objectives", "type": "array", "required": true},
        {"name": "quality_metrics", "type": "array", "required": true},
        {"name": "quality_plan", "type": "object", "required": true}
      ],

      "required_integrations": [
        {"system": "QMS", "type": "bidirectional", "protocol": "API", "examples": ["SAP QM", "Veeva", "MasterControl", "ETQ"]},
        {"system": "Document Management", "type": "bidirectional", "protocol": "API", "examples": ["SharePoint", "Documentum"]},
        {"system": "ERP", "type": "read", "protocol": "API"}
      ],

      "decision_rules": [
        {"rule_id": "DR-QM-001", "name": "Regulatory Alignment", "condition": "objective.regulatory_required AND !objective.standard_defined", "action": "require_standard_definition", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "conflicting_requirements", "severity": "medium", "action": "escalate_for_resolution", "notification": ["quality_manager"]}
      ]
    },

    {
      "id": "agent_13_3_1_1_step2",
      "apqc_id": "13.3.1.1",
      "step_number": 2,
      "step_name": "Quality Assurance",
      "description": "Establish processes and controls to ensure quality standards are met",
      "purpose": "Prevent quality issues proactively",
      "business_value": "Consistent quality delivery",

      "capabilities": ["process_control", "standard_enforcement", "training_management", "supplier_qualification", "design_review"],

      "input_schema": [
        {"name": "quality_plan", "type": "object", "required": true},
        {"name": "processes", "type": "array", "required": true},
        {"name": "control_points", "type": "array", "required": true}
      ],

      "output_schema": [
        {"name": "qa_procedures", "type": "array", "required": true},
        {"name": "control_plan", "type": "object", "required": true},
        {"name": "training_requirements", "type": "array", "required": true},
        {"name": "supplier_requirements", "type": "array", "required": true}
      ],

      "required_integrations": [
        {"system": "QMS", "type": "bidirectional", "protocol": "API"},
        {"system": "LMS", "type": "bidirectional", "protocol": "API", "examples": ["Cornerstone", "SAP SuccessFactors Learning"]},
        {"system": "SRM", "type": "bidirectional", "protocol": "API", "examples": ["SAP Ariba", "Coupa"]}
      ],

      "decision_rules": [
        {"rule_id": "DR-QM-010", "name": "Critical Process", "condition": "process.criticality == 'high'", "action": "require_dual_control", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "training_not_completed", "severity": "high", "action": "block_process_execution", "notification": ["quality_manager", "hr"]}
      ]
    },

    {
      "id": "agent_13_3_1_1_step3",
      "apqc_id": "13.3.1.1",
      "step_number": 3,
      "step_name": "Quality Control",
      "description": "Monitor and inspect products/services against quality standards",
      "purpose": "Detect and address quality issues",
      "business_value": "Defect prevention and detection",

      "capabilities": ["inspection_management", "testing_coordination", "statistical_process_control", "sampling_plans", "defect_tracking"],

      "input_schema": [
        {"name": "inspection_items", "type": "array", "required": true},
        {"name": "quality_standards", "type": "array", "required": true},
        {"name": "sampling_method", "type": "string", "required": true, "validation": {"enum": ["100_percent", "statistical", "random", "skip_lot"]}}
      ],

      "output_schema": [
        {"name": "inspection_results", "type": "array", "required": true},
        {"name": "defects_found", "type": "array", "required": true},
        {"name": "pass_rate", "type": "number", "required": true},
        {"name": "disposition", "type": "object", "required": true}
      ],

      "required_integrations": [
        {"system": "QMS", "type": "bidirectional", "protocol": "API"},
        {"system": "MES", "type": "bidirectional", "protocol": "API", "examples": ["SAP ME", "Rockwell FactoryTalk", "Siemens Opcenter"]},
        {"system": "Lab Management", "type": "bidirectional", "protocol": "API", "examples": ["LIMS", "LabWare"]}
      ],

      "decision_rules": [
        {"rule_id": "DR-QM-020", "name": "Out of Spec", "condition": "measurement.value > specification.upper OR measurement.value < specification.lower", "action": "quarantine_and_investigate", "priority": 1},
        {"rule_id": "DR-QM-021", "name": "Trend Alert", "condition": "consecutive_near_limits >= 3", "action": "trigger_process_review", "priority": 2}
      ],

      "error_handlers": [
        {"error_type": "equipment_malfunction", "severity": "high", "action": "halt_inspection_pending_calibration", "notification": ["quality_engineer", "maintenance"]}
      ]
    },

    {
      "id": "agent_13_3_1_1_step4",
      "apqc_id": "13.3.1.1",
      "step_number": 4,
      "step_name": "Non-Conformance Management",
      "description": "Handle non-conforming products/services and track resolution",
      "purpose": "Manage quality deviations",
      "business_value": "Controlled response to quality issues",

      "capabilities": ["nc_documentation", "root_cause_analysis", "containment_actions", "disposition_management", "customer_notification"],

      "input_schema": [
        {"name": "non_conformance", "type": "object", "required": true},
        {"name": "affected_items", "type": "array", "required": true},
        {"name": "severity", "type": "string", "required": true, "validation": {"enum": ["critical", "major", "minor"]}}
      ],

      "output_schema": [
        {"name": "nc_report", "type": "object", "required": true},
        {"name": "root_cause", "type": "object", "required": true},
        {"name": "containment_status", "type": "object", "required": true},
        {"name": "disposition_decision", "type": "string", "required": true, "validation": {"enum": ["use_as_is", "rework", "repair", "scrap", "return_to_supplier"]}}
      ],

      "required_integrations": [
        {"system": "QMS", "type": "bidirectional", "protocol": "API"},
        {"system": "ERP", "type": "bidirectional", "protocol": "API"},
        {"system": "Customer Portal", "type": "outbound", "protocol": "API"}
      ],

      "decision_rules": [
        {"rule_id": "DR-QM-030", "name": "Safety Impact", "condition": "nc.safety_impact == true", "action": "immediate_containment_and_escalation", "priority": 1},
        {"rule_id": "DR-QM-031", "name": "Customer Notification", "condition": "nc.shipped_to_customer == true", "action": "initiate_customer_notification", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "containment_failed", "severity": "critical", "action": "escalate_to_executive", "notification": ["quality_director", "operations_vp"]}
      ]
    },

    {
      "id": "agent_13_3_1_1_step5",
      "apqc_id": "13.3.1.1",
      "step_number": 5,
      "step_name": "Corrective and Preventive Action",
      "description": "Implement CAPA to address root causes and prevent recurrence",
      "purpose": "Systematic problem resolution",
      "business_value": "Continuous quality improvement",

      "capabilities": ["capa_workflow", "effectiveness_verification", "8d_methodology", "fishbone_analysis", "five_whys"],

      "input_schema": [
        {"name": "capa_trigger", "type": "object", "required": true},
        {"name": "problem_statement", "type": "string", "required": true},
        {"name": "capa_type", "type": "string", "required": true, "validation": {"enum": ["corrective", "preventive", "improvement"]}}
      ],

      "output_schema": [
        {"name": "capa_record", "type": "object", "required": true},
        {"name": "corrective_actions", "type": "array", "required": true},
        {"name": "preventive_actions", "type": "array", "required": true},
        {"name": "effectiveness_results", "type": "object", "required": true}
      ],

      "required_integrations": [
        {"system": "QMS", "type": "bidirectional", "protocol": "API"},
        {"system": "Project Management", "type": "bidirectional", "protocol": "API", "examples": ["Jira", "Asana"]}
      ],

      "decision_rules": [
        {"rule_id": "DR-QM-040", "name": "CAPA Overdue", "condition": "days_open > due_days", "action": "escalate_to_owner_manager", "priority": 1},
        {"rule_id": "DR-QM-041", "name": "Repeat Issue", "condition": "similar_capa.count > 2 in 12_months", "action": "systemic_review_required", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "effectiveness_not_verified", "severity": "medium", "action": "extend_verification_period", "notification": ["capa_owner"]}
      ]
    },

    {
      "id": "agent_13_3_1_1_step6",
      "apqc_id": "13.3.1.1",
      "step_number": 6,
      "step_name": "Quality Auditing",
      "description": "Conduct internal and external quality audits",
      "purpose": "Verify quality system effectiveness",
      "business_value": "Compliance assurance and improvement opportunities",

      "capabilities": ["audit_planning", "audit_execution", "finding_documentation", "audit_reporting", "certification_support"],

      "input_schema": [
        {"name": "audit_type", "type": "string", "required": true, "validation": {"enum": ["internal", "supplier", "customer", "certification", "regulatory"]}},
        {"name": "audit_scope", "type": "array", "required": true},
        {"name": "audit_criteria", "type": "array", "required": true}
      ],

      "output_schema": [
        {"name": "audit_report", "type": "object", "required": true},
        {"name": "findings", "type": "array", "required": true},
        {"name": "observations", "type": "array", "required": false},
        {"name": "audit_score", "type": "number", "required": false}
      ],

      "required_integrations": [
        {"system": "QMS", "type": "bidirectional", "protocol": "API"},
        {"system": "Audit Management", "type": "bidirectional", "protocol": "API", "examples": ["SAP Audit Management", "AuditBoard", "Workiva"]}
      ],

      "decision_rules": [
        {"rule_id": "DR-QM-050", "name": "Major Finding", "condition": "finding.severity == 'major'", "action": "require_immediate_capa", "priority": 1},
        {"rule_id": "DR-QM-051", "name": "Certification Risk", "condition": "major_findings.count >= 3", "action": "escalate_to_executive", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "audit_incomplete", "severity": "medium", "action": "schedule_follow_up", "notification": ["audit_manager"]}
      ]
    },

    {
      "id": "agent_13_3_1_1_step7",
      "apqc_id": "13.3.1.1",
      "step_number": 7,
      "step_name": "Quality Performance Review",
      "description": "Analyze quality metrics and drive continuous improvement",
      "purpose": "Monitor and improve quality performance",
      "business_value": "Data-driven quality improvement",

      "capabilities": ["metric_analysis", "trend_identification", "benchmarking", "improvement_prioritization", "management_review"],

      "input_schema": [
        {"name": "review_period", "type": "object", "required": true},
        {"name": "quality_metrics", "type": "array", "required": true},
        {"name": "comparison_data", "type": "object", "required": false}
      ],

      "output_schema": [
        {"name": "performance_report", "type": "object", "required": true},
        {"name": "trend_analysis", "type": "object", "required": true},
        {"name": "improvement_opportunities", "type": "array", "required": true},
        {"name": "management_review_minutes", "type": "object", "required": true}
      ],

      "required_integrations": [
        {"system": "QMS", "type": "read", "protocol": "API"},
        {"system": "Business Intelligence", "type": "bidirectional", "protocol": "API", "examples": ["Tableau", "Power BI"]},
        {"system": "Benchmarking", "type": "read", "protocol": "API", "examples": ["APQC Benchmarking"]}
      ],

      "decision_rules": [
        {"rule_id": "DR-QM-060", "name": "Target Missed", "condition": "metric.actual < metric.target", "action": "require_improvement_plan", "priority": 2},
        {"rule_id": "DR-QM-061", "name": "Significant Decline", "condition": "metric.trend == 'declining' AND decline_rate > 10%", "action": "root_cause_required", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "data_unavailable", "severity": "medium", "action": "use_available_data_with_caveat", "notification": ["quality_analyst"]}
      ]
    }
  ],

  "integration_summary": {
    "qms_platforms": ["SAP QM", "Veeva", "MasterControl", "ETQ", "TrackWise"],
    "mes_systems": ["SAP ME", "Rockwell FactoryTalk", "Siemens Opcenter", "AVEVA"],
    "audit_management": ["SAP Audit Management", "AuditBoard", "Workiva", "Diligent"],
    "analytics": ["Tableau", "Power BI", "Minitab", "JMP"]
  },

  "kpis": [
    {"name": "First Pass Yield", "description": "Percentage passing inspection first time", "target": "> 95%", "measurement": "passed_first_time / total_inspected"},
    {"name": "Cost of Quality", "description": "Total quality costs as percentage of revenue", "target": "< 3%", "measurement": "(prevention + appraisal + failure_costs) / revenue"},
    {"name": "Customer Complaints", "description": "Complaints per million units", "target": "< 100 PPM", "measurement": "complaints / units_shipped * 1000000"},
    {"name": "CAPA Closure Rate", "description": "CAPAs closed on time", "target": "> 90%", "measurement": "closed_on_time / total_capas"},
    {"name": "Audit Finding Rate", "description": "Major findings per audit", "target": "< 1", "measurement": "major_findings / total_audits"},
    {"name": "Supplier Quality", "description": "Supplier defect rate", "target": "< 500 PPM", "measurement": "supplier_defects / items_received * 1000000"}
  ]
}

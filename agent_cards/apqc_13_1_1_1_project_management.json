{
  "apqc_id": "13.1.1.1",
  "apqc_name": "Manage project portfolio",
  "category": "13.0 - Develop and Manage Business Capabilities",
  "description": "End-to-end project portfolio management from project initiation through closure, including planning, execution, monitoring, and governance.",
  "orchestration_pattern": "sequential",
  "total_steps": 7,
  "estimated_duration_seconds": 7776000,
  "compliance_frameworks": ["PMBOK", "PRINCE2", "Agile/Scrum", "ISO 21500"],
  "data_retention_days": 2555,

  "agent_cards": [
    {
      "id": "agent_13_1_1_1_step1",
      "apqc_id": "13.1.1.1",
      "step_number": 1,
      "step_name": "Project Initiation",
      "description": "Define and authorize projects with clear objectives and governance",
      "purpose": "Establish project foundation",
      "business_value": "Well-defined project scope and authority",

      "capabilities": ["project_charter", "stakeholder_identification", "business_case", "feasibility_analysis", "governance_setup"],

      "input_schema": [
        {"name": "project_request", "type": "object", "required": true},
        {"name": "business_objectives", "type": "array", "required": true},
        {"name": "sponsor", "type": "string", "required": true},
        {"name": "estimated_budget", "type": "number", "required": true}
      ],

      "output_schema": [
        {"name": "project_charter", "type": "object", "required": true},
        {"name": "project_id", "type": "string", "required": true},
        {"name": "stakeholder_register", "type": "array", "required": true},
        {"name": "approval_status", "type": "string", "required": true}
      ],

      "required_integrations": [
        {"system": "PPM", "type": "bidirectional", "protocol": "API", "examples": ["ServiceNow PPM", "Planview", "Workfront", "Clarity"]},
        {"system": "Financial System", "type": "bidirectional", "protocol": "API"},
        {"system": "Document Management", "type": "bidirectional", "protocol": "API"}
      ],

      "decision_rules": [
        {"rule_id": "DR-PJ-001", "name": "Budget Threshold", "condition": "budget > $1M", "action": "require_steering_approval", "priority": 1},
        {"rule_id": "DR-PJ-002", "name": "Strategic Alignment", "condition": "alignment_score < 0.6", "action": "require_business_case_review", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "sponsor_unavailable", "severity": "high", "action": "escalate_to_pmo", "notification": ["pmo_director"]}
      ]
    },

    {
      "id": "agent_13_1_1_1_step2",
      "apqc_id": "13.1.1.1",
      "step_number": 2,
      "step_name": "Project Planning",
      "description": "Develop comprehensive project plans including scope, schedule, and resources",
      "purpose": "Detailed execution roadmap",
      "business_value": "Predictable project delivery",

      "capabilities": ["wbs_development", "schedule_creation", "resource_planning", "risk_planning", "budget_planning"],

      "input_schema": [
        {"name": "project_charter", "type": "object", "required": true},
        {"name": "methodology", "type": "string", "required": true, "validation": {"enum": ["waterfall", "agile", "hybrid"]}},
        {"name": "constraints", "type": "object", "required": true}
      ],

      "output_schema": [
        {"name": "project_plan", "type": "object", "required": true},
        {"name": "wbs", "type": "object", "required": true},
        {"name": "schedule", "type": "object", "required": true},
        {"name": "resource_plan", "type": "object", "required": true},
        {"name": "risk_register", "type": "array", "required": true}
      ],

      "required_integrations": [
        {"system": "PPM", "type": "bidirectional", "protocol": "API"},
        {"system": "Scheduling Tool", "type": "bidirectional", "protocol": "API", "examples": ["Microsoft Project", "Smartsheet", "Monday.com"]},
        {"system": "Resource Management", "type": "bidirectional", "protocol": "API", "examples": ["Resource Guru", "Runn", "Float"]}
      ],

      "decision_rules": [
        {"rule_id": "DR-PJ-010", "name": "Critical Path", "condition": "schedule.float < 5_days", "action": "flag_critical_tasks", "priority": 1},
        {"rule_id": "DR-PJ-011", "name": "Resource Conflict", "condition": "resource.allocation > 100%", "action": "resolve_conflict", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "plan_incomplete", "severity": "medium", "action": "block_execution_start", "notification": ["project_manager"]}
      ]
    },

    {
      "id": "agent_13_1_1_1_step3",
      "apqc_id": "13.1.1.1",
      "step_number": 3,
      "step_name": "Project Execution",
      "description": "Execute project activities and manage deliverables",
      "purpose": "Deliver project outputs",
      "business_value": "Quality deliverables on time",

      "capabilities": ["task_management", "team_coordination", "deliverable_tracking", "quality_assurance", "stakeholder_communication"],

      "input_schema": [
        {"name": "project_plan", "type": "object", "required": true},
        {"name": "team_assignments", "type": "array", "required": true},
        {"name": "sprint_goals", "type": "array", "required": false}
      ],

      "output_schema": [
        {"name": "deliverables", "type": "array", "required": true},
        {"name": "task_status", "type": "object", "required": true},
        {"name": "team_performance", "type": "object", "required": true},
        {"name": "issues_log", "type": "array", "required": true}
      ],

      "required_integrations": [
        {"system": "PPM", "type": "bidirectional", "protocol": "API"},
        {"system": "Work Management", "type": "bidirectional", "protocol": "API", "examples": ["Jira", "Asana", "Azure DevOps"]},
        {"system": "Collaboration", "type": "bidirectional", "protocol": "API", "examples": ["Slack", "Microsoft Teams"]}
      ],

      "decision_rules": [
        {"rule_id": "DR-PJ-020", "name": "Blocked Task", "condition": "task.blocked_days > 3", "action": "escalate_blocker", "priority": 1},
        {"rule_id": "DR-PJ-021", "name": "Quality Issue", "condition": "defect_rate > threshold", "action": "halt_for_quality_review", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "team_member_unavailable", "severity": "medium", "action": "reassign_or_adjust_timeline", "notification": ["project_manager"]}
      ]
    },

    {
      "id": "agent_13_1_1_1_step4",
      "apqc_id": "13.1.1.1",
      "step_number": 4,
      "step_name": "Project Monitoring and Control",
      "description": "Monitor project performance and implement corrective actions",
      "purpose": "Keep project on track",
      "business_value": "Proactive issue resolution",

      "capabilities": ["earned_value_analysis", "variance_tracking", "change_control", "issue_management", "status_reporting"],

      "input_schema": [
        {"name": "baseline_plan", "type": "object", "required": true},
        {"name": "actual_progress", "type": "object", "required": true},
        {"name": "reporting_period", "type": "object", "required": true}
      ],

      "output_schema": [
        {"name": "status_report", "type": "object", "required": true},
        {"name": "variance_analysis", "type": "object", "required": true},
        {"name": "evm_metrics", "type": "object", "required": true},
        {"name": "corrective_actions", "type": "array", "required": false}
      ],

      "required_integrations": [
        {"system": "PPM", "type": "bidirectional", "protocol": "API"},
        {"system": "Business Intelligence", "type": "read", "protocol": "API", "examples": ["Tableau", "Power BI"]},
        {"system": "Financial System", "type": "read", "protocol": "API"}
      ],

      "decision_rules": [
        {"rule_id": "DR-PJ-030", "name": "Schedule Variance", "condition": "sv < -10%", "action": "require_recovery_plan", "priority": 1},
        {"rule_id": "DR-PJ-031", "name": "Cost Overrun", "condition": "cv < -15%", "action": "escalate_to_sponsor", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "data_sync_failure", "severity": "medium", "action": "manual_status_collection", "notification": ["pmo_analyst"]}
      ]
    },

    {
      "id": "agent_13_1_1_1_step5",
      "apqc_id": "13.1.1.1",
      "step_number": 5,
      "step_name": "Change Management",
      "description": "Evaluate and manage project changes",
      "purpose": "Controlled scope management",
      "business_value": "Prevent scope creep",

      "capabilities": ["change_request_intake", "impact_analysis", "change_approval", "baseline_update", "communication"],

      "input_schema": [
        {"name": "change_request", "type": "object", "required": true},
        {"name": "current_baseline", "type": "object", "required": true},
        {"name": "change_type", "type": "string", "required": true, "validation": {"enum": ["scope", "schedule", "budget", "resource", "quality"]}}
      ],

      "output_schema": [
        {"name": "impact_assessment", "type": "object", "required": true},
        {"name": "approval_status", "type": "string", "required": true},
        {"name": "updated_baseline", "type": "object", "required": false},
        {"name": "communication_record", "type": "object", "required": true}
      ],

      "required_integrations": [
        {"system": "PPM", "type": "bidirectional", "protocol": "API"},
        {"system": "Approval Workflow", "type": "bidirectional", "protocol": "API"}
      ],

      "decision_rules": [
        {"rule_id": "DR-PJ-040", "name": "Major Change", "condition": "impact.budget > 10% OR impact.schedule > 2_weeks", "action": "require_ccb_approval", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "approval_timeout", "severity": "medium", "action": "escalate_to_ccb_chair", "notification": ["pmo_director"]}
      ]
    },

    {
      "id": "agent_13_1_1_1_step6",
      "apqc_id": "13.1.1.1",
      "step_number": 6,
      "step_name": "Risk Management",
      "description": "Identify, assess, and respond to project risks",
      "purpose": "Proactive risk mitigation",
      "business_value": "Reduced project uncertainty",

      "capabilities": ["risk_identification", "risk_assessment", "response_planning", "risk_monitoring", "contingency_management"],

      "input_schema": [
        {"name": "project_context", "type": "object", "required": true},
        {"name": "risk_categories", "type": "array", "required": true},
        {"name": "risk_tolerance", "type": "object", "required": true}
      ],

      "output_schema": [
        {"name": "risk_register", "type": "array", "required": true},
        {"name": "risk_responses", "type": "array", "required": true},
        {"name": "contingency_reserve", "type": "number", "required": true},
        {"name": "risk_report", "type": "object", "required": true}
      ],

      "required_integrations": [
        {"system": "PPM", "type": "bidirectional", "protocol": "API"},
        {"system": "Risk Management", "type": "bidirectional", "protocol": "API", "examples": ["ARM", "Predict!", "Active Risk Manager"]}
      ],

      "decision_rules": [
        {"rule_id": "DR-PJ-050", "name": "High Risk", "condition": "risk.score > 15", "action": "immediate_mitigation_required", "priority": 1},
        {"rule_id": "DR-PJ-051", "name": "Risk Materialized", "condition": "risk.status == 'occurred'", "action": "activate_contingency", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "contingency_exhausted", "severity": "critical", "action": "escalate_to_steering", "notification": ["sponsor", "pmo_director"]}
      ]
    },

    {
      "id": "agent_13_1_1_1_step7",
      "apqc_id": "13.1.1.1",
      "step_number": 7,
      "step_name": "Project Closure",
      "description": "Close project formally with lessons learned and knowledge transfer",
      "purpose": "Formal project completion",
      "business_value": "Organizational learning and asset transfer",

      "capabilities": ["deliverable_acceptance", "lessons_learned", "knowledge_transfer", "resource_release", "financial_closure"],

      "input_schema": [
        {"name": "project_id", "type": "string", "required": true},
        {"name": "deliverables", "type": "array", "required": true},
        {"name": "final_status", "type": "object", "required": true}
      ],

      "output_schema": [
        {"name": "closure_report", "type": "object", "required": true},
        {"name": "lessons_learned", "type": "array", "required": true},
        {"name": "final_metrics", "type": "object", "required": true},
        {"name": "archive_reference", "type": "string", "required": true}
      ],

      "required_integrations": [
        {"system": "PPM", "type": "bidirectional", "protocol": "API"},
        {"system": "Knowledge Management", "type": "bidirectional", "protocol": "API", "examples": ["Confluence", "SharePoint"]},
        {"system": "Financial System", "type": "bidirectional", "protocol": "API"}
      ],

      "decision_rules": [
        {"rule_id": "DR-PJ-060", "name": "Incomplete Deliverables", "condition": "deliverables.unaccepted > 0", "action": "block_closure", "priority": 1}
      ],

      "error_handlers": [
        {"error_type": "stakeholder_sign_off_pending", "severity": "medium", "action": "escalate_for_sign_off", "notification": ["project_manager", "sponsor"]}
      ]
    }
  ],

  "integration_summary": {
    "ppm_platforms": ["ServiceNow PPM", "Planview", "Workfront", "Clarity", "Microsoft Project Online"],
    "work_management": ["Jira", "Asana", "Azure DevOps", "Monday.com", "Smartsheet"],
    "collaboration": ["Slack", "Microsoft Teams", "Confluence"],
    "resource_management": ["Resource Guru", "Runn", "Float", "Forecast"]
  },

  "kpis": [
    {"name": "On-Time Delivery", "description": "Projects completed on schedule", "target": "> 80%", "measurement": "on_time_projects / total_projects"},
    {"name": "On-Budget Delivery", "description": "Projects within budget", "target": "> 85%", "measurement": "on_budget_projects / total_projects"},
    {"name": "Scope Compliance", "description": "Scope delivered as planned", "target": "> 90%", "measurement": "scope_delivered / scope_planned"},
    {"name": "Stakeholder Satisfaction", "description": "Stakeholder satisfaction score", "target": "> 4.0/5.0", "measurement": "avg(satisfaction_scores)"},
    {"name": "Resource Utilization", "description": "Billable resource utilization", "target": "75-85%", "measurement": "billable_hours / available_hours"},
    {"name": "Benefits Realization", "description": "Projected benefits achieved", "target": "> 80%", "measurement": "actual_benefits / projected_benefits"}
  ]
}
